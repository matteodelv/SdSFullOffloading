# SdSFullOffloading
Based on the paper *Stochastic Analysis of Delayed Mobile Offloading in Heterogeneous Networks* [[1]](https://doi.org/10.1109/TMC.2017.2711014), this project represents the implementation of the **Full Offloading Model** described as an OMNeT++ simulation.
  
This work has been carried out as part of the Simulazione di Sistemi exam, while attending the Computer Science Graduate course @ UniBo. More information can be found in the ``docs`` folder (Italian only).

### Requirements
- [OMNeT++](https://omnetpp.org), version 5.5.1 on Ubuntu has been used
- [Queueinglib](https://github.com/shigeya/omnetpp/tree/master/samples/queueinglib) for OMNeT++
- Bash shell
- Python 3, tested on version 3.6.8
- Many Python packages: ``argparse``, ``numpy``, ``scipy``, ``json``, ``matplotlib``, ``re``

### Download
Use the following commands to download a local copy of this repository:

    git clone https://github.com/matteodelv/SdSFullOffloading.git  
    cd SdSFullOffloading/

### Execution
The entire execution is handled by the ``launchSimulation.sh`` shell script: it launches all the simulations, gathers data, exports them from vectorial files to JSON files and then, executes the appropriate Python script for results analysis.  
  
The project has two configuration: ``SetupAnalysis``, for the initial evaluation of the warmup-period, and ``BatchExecution``, which is the real steady-state system simulation. When they are both executed, the total amount of data generated is about 35/40 GB.

To run the simulation, first you have to define the queueinglib path by issuing the following command (replace the path with the appropriate one for your OMNeT installation):  
``export QUEUEINGLIB=~/omnetpp-5.5.1/samples/queueinglib``  

Then, from the project main folder, launch the script with the configuration you want to execute:  
``analysis/launchSimulation.sh BatchExecution``

### Results
After the execution and according to the chosen configuration, the following folders will be created:

- ``results/``: contains raw vectorial data exported by OMNeT++
- ``results/JSON/``: contains JSON versions of the exported data
- ``analysis/plots/``: cointains all plots generated by the analysis
- ``analysis/csv/``: contains all CSV files with confidence intervals for every metric (only for ``BatchExecution``)

##### SetupAnalysis
This configuration will create all the useful plots to estimate the warmup-period for the system. In particular, one for every exponential distribution used: WiFi Queue service time, Cellular Queue service time, WiFi state distribution, Cellular state distribution and deadline distribution.

##### BatchExecution
This configuration will create the actual plots for all the investigated metrics: Mean Response Time (*MRT*), Mean Energy Consumption (*MEC*) and Energy-Response Weighted Product (*ERWP*) with exponent 0.1, 0.5, 0.9. In addition, CSV files with 90%-confidence intervals are generated for every metric.  
The resulting plots can be compared to the ones in the paper to get an idea of the simulated model behaviour.
